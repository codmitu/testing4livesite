{"version":3,"sources":["firebase.ts","App.tsx","redux/action-types/index.ts","emailAuth.ts","reportWebVitals.ts","redux/reducers/bankReducer.ts","redux/reducers/index.ts","redux/store.ts","index.tsx"],"names":["app","initializeApp","apiKey","process","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","auth","getAnalytics","getAuth","useDeviceLanguage","Providers","google","GoogleAuthProvider","facebook","FacebookAuthProvider","App","ActionType","emailRef","useRef","useAuthState","user","handleEmailSignUp","email","sendSignInLinkToEmail","url","handleCodeInApp","then","window","localStorage","setItem","JSON","stringify","catch","error","emailAuth","console","log","handleProviderSignUp","provider","signInWithPopup","result","credential","credentialFromResult","accessToken","errorCode","code","message","credentialFromError","tryWithEmail","handleLogOut","signOut","prompt","useEffect","isSignInWithEmailLink","location","href","parse","getItem","signInWithEmailLink","removeItem","className","type","placeholder","ref","onClick","current","value","displayName","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","reducer","state","action","DEPOSIT","payload","WITHDRAW","BANKRUPT","reducers","combineReducers","bank","bankReducer","store","createStore","applyMiddleware","thunk","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.db004b41.chunk.js","sourcesContent":["// Import the functions you need from the SDKs you need\r\nimport { initializeApp } from \"firebase/app\";\r\nimport { getAnalytics } from \"firebase/analytics\";\r\nimport { FacebookAuthProvider, GoogleAuthProvider, getAuth  } from \"firebase/auth\";\r\n// TODO: Add SDKs for Firebase products that you want to use\r\n// https://firebase.google.com/docs/web/setup#available-libraries\r\n\r\n// Your web app's Firebase configuration\r\n// For Firebase JS SDK v7.20.0 and later, measurementId is optional\r\nconst firebaseConfig = {\r\n  apiKey: process.env.REACT_APP_API_KEY,\r\n  authDomain: process.env.REACT_APP_AUTH_DOMAIN,\r\n  databaseURL: process.env.REACT_APP_DATABASE_URL,\r\n  projectId: process.env.REACT_APP_PROJECT_ID,\r\n  storageBucket: process.env.REACT_APP_STORAGE_BUCKET,\r\n  messagingSenderId: process.env.REACT_APP_MESSAGING_SENDER_ID,\r\n  appId: process.env.REACT_APP_APP_ID,\r\n  measurementId: process.env.REACT_APP_MEASUREMENT_ID\r\n};\r\n\r\n// Initialize Firebase\r\nconst app = initializeApp(firebaseConfig);\r\nconst analytics = getAnalytics(app);\r\nconst auth = getAuth()\r\nauth.useDeviceLanguage()\r\n// or auth.languageCode = 'ro'\r\nconst Providers = {\r\n  google: new GoogleAuthProvider(),\r\n  facebook: new FacebookAuthProvider(),\r\n};\r\n\r\nexport {Providers, auth}","import { MutableRefObject, useEffect, useRef } from \"react\";\nimport { FacebookAuthProvider, GoogleAuthProvider, isSignInWithEmailLink, signInWithEmailLink, signInWithPopup, signOut } from '@firebase/auth'\nimport {auth, Providers} from \"./firebase\"\nimport { emailAuth } from \"./emailAuth\";\nimport { useAuthState } from 'react-firebase-hooks/auth';\n\nfunction App() {\n  const emailRef = useRef() as MutableRefObject<HTMLInputElement>;\n  const [user, loading, error] = useAuthState(auth)\n\n  const handleEmailSignUp = (email: string) => {\n    emailAuth(email)\n    console.log(\"Check your e-mail and click the link to continue to your account\")\n  }\n\n  const handleProviderSignUp = (provider: any) => {\n    signInWithPopup(auth, provider)\n      .then((result) => {\n        const credential = (provider === Providers.facebook ? FacebookAuthProvider : GoogleAuthProvider).credentialFromResult(result)\n        const accessToken = credential?.accessToken\n        const user = result.user\n        // console.log(credential, accessToken, user)\n      }).catch((error) => {\n        const errorCode = error.code\n        const errorMessage = error.message\n        const email = error.email\n        const credential = (provider === Providers.facebook ? FacebookAuthProvider : GoogleAuthProvider).credentialFromError(error)\n        // console.log(errorCode, errorMessage, email, credential)\n\n        if (errorCode === 'auth/account-exists-with-different-credential') {\n          console.log(\"A fost detectat un alt cont cu acest email, din cauza conflictului va rugam adaugati din nou email-ul.\")\n          tryWithEmail()\n        }\n      })\n  }\n\n  const handleLogOut = () => {\n    signOut(auth).then(() => {\n      console.log(\"signed out\")\n    }).catch((error) => {\n      // console.log(error) \n    })\n  }\n\n  // On email Sign Up - After clicking on the link in the email, check the email from local storage with the link\n  // Else if the user open the email from another browser/device, prompt a window to add the email\n  // to check if its the correct email\n  useEffect(() => {\n    if(isSignInWithEmailLink(auth, window.location.href)) {\n        let LS = JSON.parse(localStorage.getItem('emailToSignUp') || '{}')\n        let email = LS.email\n        if(!email) {\n          email = window.prompt(\"Te rog adauga email-ul pentru confirmare.\")\n        }\n        console.log(email)\n        signInWithEmailLink(auth, email, window.location.href)\n          .then((result) => {\n              window.localStorage.removeItem('emailToSignUp')\n              // console.log(result.user)\n            })\n            .catch((error) => {\n              // console.log(error.code, error.message)\n            })\n    }\n  }, [])\n\n\n  // Check if user has email with facebook sign up, if not, then prompt window to add an email\n  // and use email auth after that \n  useEffect(() => {\n    if (user && !user.email) {\n      tryWithEmail()\n    }\n  }, [user])\n\n  function tryWithEmail() {\n    handleLogOut()\n      let email = window.prompt(\"Adauga adresa ta de e-mail pentru a putea continua\")\n      if (email) {\n        handleEmailSignUp(email)\n        // console.log(email)\n      } else {\n        //history.push(\"/\")\n      }\n  }\n\n  return (\n    <div className=\"App\">\n      <input type=\"email\" placeholder=\"email\" ref={emailRef}  />\n      <button onClick={() => handleEmailSignUp(emailRef.current.value)}>Sign in with Email</button>\n      <button onClick={() => handleProviderSignUp(Providers.google)}>Sign in with Google</button>\n      <button onClick={() => handleProviderSignUp(Providers.facebook)}>Sign in with Facebook</button>\n      <button onClick={handleLogOut}>Log out</button>\n      <div>{user?.email + \", \" + user?.displayName}</div>\n    </div>\n  );\n}\n\nexport default App;","export enum ActionType {\r\n    DEPOSIT = \"deposit\",\r\n    WITHDRAW = \"withdraw\",\r\n    BANKRUPT = \"bankrupt\"\r\n}","import { sendSignInLinkToEmail } from '@firebase/auth'\r\nimport {auth} from \"./firebase\"\r\n\r\nexport const emailAuth = (email: string) => {\r\n\r\n    const actionCodeSettings = {\r\n        // URL you want to redirect back to. The domain (www.example.com) for this\r\n        // URL must be in the authorized domains list in the Firebase Console.\r\n        url: 'https://codmitu.github.io/testing4livesite/',\r\n        // This must be true.\r\n        handleCodeInApp: true,\r\n        // iOS: {\r\n        //   bundleId: 'com.example.ios'\r\n        // },\r\n        // android: {\r\n        //   packageName: 'com.example.android',\r\n        //   installApp: true,\r\n        //   minimumVersion: '12'\r\n        // },\r\n        // dynamicLinkDomain: 'https://codmitu.github.io/lotto-generator/'\r\n      };\r\n\r\n\r\n    sendSignInLinkToEmail(auth, email, actionCodeSettings)\r\n        .then(() => {\r\n            window.localStorage.setItem('emailToSignUp', JSON.stringify({\r\n                \"email\": email\r\n            }))\r\n        })\r\n        .catch((error) => {\r\n            // console.log(error.code, error.message)\r\n        })\r\n}\r\n\r\n\r\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { ActionType } from '../action-types'\r\nimport {Action} from '../actions/index'\r\n\r\nconst initialState = 0\r\n\r\nconst reducer = (state: number = initialState, action: Action) => {\r\n    switch (action.type) {\r\n        case ActionType.DEPOSIT:\r\n            return state + action.payload\r\n        case ActionType.WITHDRAW:\r\n            return state - action.payload\r\n        case ActionType.BANKRUPT:\r\n            return 0\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport default reducer","import {combineReducers} from \"redux\"\r\nimport bankReducer from './bankReducer'\r\n\r\nconst reducers = combineReducers({ \r\n    bank: bankReducer\r\n})\r\n\r\nexport default reducers\r\n\r\nexport type State = ReturnType<typeof reducers>","import { applyMiddleware, createStore } from \"redux\";\r\nimport reducers from './reducers/index'\r\nimport thunk from 'redux-thunk'\r\n\r\n\r\nexport const store = createStore(\r\n    reducers,\r\n    {},\r\n    applyMiddleware(thunk)\r\n)","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport {Provider} from 'react-redux'\nimport {store} from './redux/store'\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}